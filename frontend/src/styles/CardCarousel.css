/* Token-aware defaults + card height */
:root{
  --_bg: var(--bg-primary, #f6f8fc);
  --_text: var(--text-primary, #333);
  --_muted: var(--text-secondary, #666);
  --_brand: var(--brand-primary, #4f46e5);
  --_accent: var(--brand-accent, #06b6d4);
  /* ✅ explicit card height so content is visible */
  --card-h: 380px;
--cardslider-mt: 250px;
}

@media (max-width: 1024px){
  :root{ --card-h: 258px; }
}
@media (max-width: 640px){
  :root{ --card-h: 248px; }
}

/* Structure & spacing */
.cardslider-root{
  font-family: var(--font-family, 'Roboto', sans-serif);
  color: var(--_text);
  margin-top: var(--cardslider-mt);
  position: relative;
}

/* The viewport **reserves height** using --card-h */
.cardslider-viewport{
  position: relative;
  overflow: hidden;
  width: min(1100px, 92%);
  margin: 0 auto;
  padding: 6px 36px; /* room for arrows */
  min-height: calc(var(--card-h) + 16px); /* ✅ ensures track is visible */
}

/* The track is a flex row; width is set inline in px */
.cardslider-track{
  display: flex;
  align-items: stretch;
  gap: 18px;
  will-change: transform;
  min-height: var(--card-h); /* ✅ reserve height */
}

/* arrow nav */
.nav-btn{
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 36px; height: 36px; border-radius: 50%;
  border: 1px solid color-mix(in srgb, var(--_brand) 40%, transparent);
  background: linear-gradient(180deg, var(--glass) 0%, var(--glass-soft) 100%);
  backdrop-filter: blur(10px) saturate(120%);
  -webkit-backdrop-filter: blur(10px) saturate(120%);
  color: var(--_text);
  font-size: 22px;
  line-height: 1;
  display: grid; place-items: center;
  cursor: pointer;
  z-index: 2;
  transition: transform .15s ease, box-shadow .2s ease, border-color .2s ease;
}
.nav-btn:hover{
  transform: translateY(-50%) scale(1.04);
  border-color: color-mix(in srgb, var(--_accent) 55%, transparent);
  box-shadow: 0 10px 26px rgba(79,70,229,.25);
}
.nav-prev{ left: 6px; }
.nav-next{ right: 6px; }

/* items get explicit width inline; we provide a fixed height here */
.card2-item{
  flex: 0 0 auto;
  display: flex;
  height: var(--card-h); /* ✅ key fix */
}

/* glassy card with animated border */
.card2{
  position: relative;
  border-radius: 18px;
  overflow: hidden;
  flex: 1 1 auto;
  height: 100%;
  background:
    linear-gradient(180deg, var(--glass) 0%, var(--glass-soft) 100%),
    radial-gradient(120% 120% at 0% 0%,
      color-mix(in srgb, var(--_brand) 12%, transparent), transparent 65%);
  border: 1px solid color-mix(in srgb, var(--_brand) 28%, transparent);
  box-shadow: var(--shadow-card);
  backdrop-filter: blur(12px) saturate(120%);
  -webkit-backdrop-filter: blur(12px) saturate(120%);
  transition: transform .22s ease, box-shadow .25s ease, border-color .25s ease;
}
.card2:hover{
  transform: translateY(-6px) scale(1.02);
  box-shadow: var(--shadow-card-hover);
  border-color: color-mix(in srgb, var(--_accent) 38%, transparent);
}

/* animated conic border */
.card2-border{
  pointer-events: none;
  position: absolute;
  inset: -2px;
  border-radius: 20px;
  padding: 1px;
  background:
    conic-gradient(from var(--ang, 0deg),
      color-mix(in srgb, var(--_accent) 75%, transparent),
      transparent 32%,
      color-mix(in srgb, var(--_brand) 75%, transparent));
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
          mask-composite: exclude;
  animation: spin 7s linear infinite;
  opacity: .28;
}

/* media */
.card2 img{
  position: absolute;
  inset: 8px 8px 100px 8px; /* leave space for title + desc + button */
  width: calc(100% - 16px);
  height: calc(100% - 108px);
  object-fit: cover;
  border-radius: 12px;
  filter: saturate(110%) contrast(102%);
  opacity: .9;
  transition: transform .35s ease, opacity .25s ease, filter .25s ease;
}
.card2:hover img{ transform: scale(1.03); opacity: .95; filter: saturate(115%) contrast(104%); }

/* bottom readability fade */
.card2-fade{
  position: absolute;
  left: 8px; right: 8px; bottom: 88px;
  height: 54%;
  border-radius: 12px;
  background: linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.45));
  pointer-events: none;
}

/* text */
.card2-title{
  position: absolute;
  left: 12px; right: 12px; bottom: 84px;
  margin: 0;
  font-size: 16px;
  font-weight: 800;
  text-align: center;
  background: linear-gradient(90deg,
    color-mix(in srgb, var(--_accent) 80%, #fff),
    color-mix(in srgb, var(--_brand) 80%, #fff));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 0 12px rgba(0,0,0,.35);
}
.card2-desc{
  position: absolute;
  left: 14px; right: 14px; bottom: 46px;
  margin: 0;
  font-size: 12px; line-height: 1.35;
  color: var(--_text);
  opacity: .9;
  text-align: center;
}

/* CTA */
.card2-cta{
  position: absolute;
  left: 50%; bottom: 12px;
  transform: translateX(-50%);
  padding: 8px 12px;
  border-radius: 10px;
  border: 0;
  font-weight: 800;
  font-size: 12px;
  color: var(--btn-text);
  background: var(--btn-bg);
  box-shadow: 0 6px 16px rgba(37,99,235,.35);
  cursor: pointer;
  transition: transform .15s ease, box-shadow .2s ease, background .2s ease;
}
.card2-cta:hover{
  transform: translateX(-50%) translateY(-1px);
  background: var(--btn-bg-hover);
  box-shadow: 0 10px 26px rgba(37,99,235,.45);
}

/* dots */
.cardslider-dots{
  display: flex; justify-content: center; gap: 8px;
  margin-top: 14px;
}
.dot{
  width: 10px; height: 10px; border-radius: 50%;
  border: 1px solid color-mix(in srgb, var(--_brand) 60%, transparent);
  background: color-mix(in srgb, var(--_brand) 18%, transparent);
  cursor: pointer;
  transition: transform .15s ease, background .15s ease;
}
.dot.active{
  background: color-mix(in srgb, var(--_brand) 90%, #fff);
  transform: scale(1.1);
}

/* popup (draggable glass) */
.cardslider-popup{
  position: fixed;
  z-index: 200;
  transform: translateZ(0);
  width: 80%;
  max-width: 520px;
  background:
    linear-gradient(180deg, rgba(255,255,255,0.16), rgba(255,255,255,0.06)),
    radial-gradient(120% 120% at 100% 0%,
      color-mix(in srgb, var(--_accent) 12%, transparent), transparent 60%);
  backdrop-filter: blur(16px) saturate(130%);
  -webkit-backdrop-filter: blur(16px) saturate(130%);
  border: 1px solid color-mix(in srgb, var(--_brand) 28%, transparent);
  border-radius: 18px;
  box-shadow: 0 18px 46px rgba(0,0,0,.45);
  color: var(--_text);
  padding: 14px 14px 12px;
  cursor: grab;
}
.cardslider-popup.dragging{ cursor: grabbing; }
.popup-header{
  display: flex; align-items: center; justify-content: space-between; gap: 10px;
  user-select: none;
}
.cardslider-popup h2{
  margin: 0; font-size: 20px; font-weight: 800;
  background: linear-gradient(185deg,
    color-mix(in srgb, var(--_brand) 85%, #fff),
    color-mix(in srgb, var(--_accent) 70%, #f4f3f5));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
.popup-body{
  margin-top: 8px; font-size: 15px; color: var(--_text); opacity: .95;
}
.popup-audio{
  margin-top: 14px; padding-top: 12px;
  border-top: 1px solid color-mix(in srgb, var(--_accent) 30%, transparent);
}
.popup-close{
  background: var(--btn-bg);
  color: var(--btn-text);
  border: 0; border-radius: 10px;
  padding: 8px 12px; font-weight: 800; font-size: 13px;
  box-shadow: 0 6px 16px rgba(37,99,235,.35);
  cursor: pointer;
  transition: transform .15s ease, box-shadow .2s ease, background .2s ease;
}
.popup-close:hover{
  background: var(--btn-bg-hover);
  transform: translateY(-1px);
  box-shadow: 0 10px 26px rgba(37,99,235,.45);
}

/* helpers */
.no-select{ user-select: none; }

/* animations */
@keyframes spin{ to{ --ang: 360deg; } }
